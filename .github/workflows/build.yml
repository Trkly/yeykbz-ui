name: æ‰“åŒ…éƒ¨ç½²ç»„ä»¶åº“é¡¹ç›®

on: push

jobs:
  pnpm-build:
    name: pnpm-buildå·¥ä½œ ğŸï¸
    runs-on: ubuntu-latest

    steps:
    - name: è¯»å–ä»“åº“å†…å®¹ ğŸ’
      uses: actions/checkout@v4

    # - name: å®‰è£… Node.js å’Œ pnpm â­
    #   uses: actions/setup-node@v3
    #   with:
    #     node-version: 18

    - name: å®‰è£… pnpm â­
      uses: pnpm/action-setup@v4.1.0
      with:
        version: 10.5.2

    - name: éªŒè¯ pnpm æ˜¯å¦å¯æ‰§è¡Œ ğŸŒ 
      run: which pnpm  # è°ƒè¯•ç”¨ï¼Œç¡®è®¤è·¯å¾„

    - name: å®‰è£…ä¾èµ– ğŸ³ï¸â€ğŸŒˆ
      run: pnpm install

    - name: é¡¹ç›®æ‰“åŒ… ğŸ˜Š
      run: pnpm run build

    - name: ç»„ä»¶æµ‹è¯• ğŸ›¸
      run: pnpm run test:run

    - name: éƒ¨ç½² ğŸš€
      uses: JamesIves/github-pages-deploy-action@v4
      with:
        branch: gh-pages
        folder: dist
